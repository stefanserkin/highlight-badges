<template>
    <lightning-card title="Highlight Badge Preview">

        <!-- TOGGLE PREVIEW MODE -->
        <div slot="actions">
            <lightning-button-icon-stateful 
                icon-name="utility:preview" 
                selected={isRecordPreviewMode} 
                onclick={handleTogglePreviewMode} 
                alternative-text="Record Preview Mode"
            ></lightning-button-icon-stateful>
        </div>

        <!-- RECORD PREVIEW MODE -->
        <template lwc:if={isRecordPreviewMode}>
            <!-- HAS DISPLAY OBJECT -->
            <template lwc:if={displayObject}>
                <!-- WARNING FOR INACTIVE BADGES -->
                <div lwc:if={isInactive} class="slds-var-m-around_medium">
                    <p class="inactive-badge-warning">This badge is not active. To see it appear on record pages, activate it first.</p>
                </div>
                <!-- SELECT RECORD FOR PREVIEW -->
                <c-lookup
                    object-api-name={displayObject}
                    icon-name="standard:record_lookup"
                    search-placeholder="Search for Record"
                    onselection={handleSelectedRecord}
                    class="slds-var-m-around_medium"
                ></c-lookup>
                <!-- SHOW BADGES -->
                <c-highlight-badges lwc-if={previewRecordId}
                    record-id={previewRecordId}
                    object-api-name={displayObject}
                    preview-definition-id={recordId}
                ></c-highlight-badges>
            </template>

            <!-- DISPLAY OBJECT NOT DEFINED -->
            <template lwc:else>
                <p class="slds-var-m-around_medium">
                    A Display Object must be defined before previewing a record.
                </p>
            </template>
        </template>

        <!-- DEFAULT PREVIEW MODE -->
        <template lwc:elseif={definition}>
            <div style={styles}>
                <lightning-badge 
                    icon-name={icon}
                    label={label} 
                    class="slds-var-m-horizontal_small slds-var-m-bottom_small" 
                ></lightning-badge>
            </div>
        </template>

    </lightning-card>
</template>