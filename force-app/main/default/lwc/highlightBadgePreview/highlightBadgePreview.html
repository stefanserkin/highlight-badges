<template>
    <lightning-card title="Highlight Badge Preview">

        <!-- TOGGLE PREVIEW MODE -->
        <div slot="actions">
            <lightning-button-icon-stateful 
                icon-name="utility:preview" 
                selected={isRecordPreviewMode} 
                onclick={handleTogglePreviewMode} 
                alternative-text="Record Preview Mode"
            ></lightning-button-icon-stateful>
        </div>

        <!-- RECORD PREVIEW MODE -->
        <template lwc:if={isRecordPreviewMode}>
            <!-- HAS DISPLAY OBJECT -->
            <template lwc:if={displayObject}>

                <!-- WARNING FOR INACTIVE BADGES -->
                <div lwc:if={isInactive} class="slds-var-p-around_small slds-align_absolute-center">
                    <p class="inactive-badge-warning">This badge is not active. To see it appear on record pages, activate it first.</p>
                </div>

                <!-- ENTER RECORD ID FOR PREVIEW -->
                <template lwc:if={isRecordPreviewEntry}>
                    <lightning-layout multiple-rows="true">
                        <lightning-layout-item size="12" padding="around-small" class="slds-align_absolute-center">
                            <lightning-input
                                type="text"
                                label="Display Record ID"
                                value={previewRecordId}
                                onchange={handlePreviewRecordIdChange}
                            ></lightning-input>
                        </lightning-layout-item>
                        <lightning-layout-item size="12" padding="around-small" class="slds-align_absolute-center">
                            <lightning-button
                                variant="brand"
                                label="Preview Record"
                                title="Preview Record"
                                onclick={handleRecordPreview} 
                                disabled={previewRecordIdIsInvalid}
                            ></lightning-button>
                        </lightning-layout-item>
                    </lightning-layout>
                </template>

                <!-- SHOW BADGES -->
                <template lwc:else>
                    <c-highlight-badges
                        record-id={previewRecordId}
                        object-api-name={displayObject}
                    ></c-highlight-badges>
                </template>

            </template>

            <!-- DISPLAY OBJECT NOT DEFINED -->
            <template lwc:else>
                <p class="slds-var-m-around_medium">
                    Define a Display Object before previewing a record.
                </p>
            </template>
        </template>

        <!-- DEFAULT PREVIEW MODE -->
        <template lwc:elseif={definition}>
            <div style={styles}>
                <lightning-badge 
                    icon-name={icon}
                    label={label} 
                    class="slds-var-m-horizontal_small slds-var-m-bottom_small" 
                ></lightning-badge>
            </div>
        </template>

    </lightning-card>
</template>